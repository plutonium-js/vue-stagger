!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).puStagger=e()}(this,function(){"use strict";var t=function(t,e,i,s,n,a,o,r,d,l){"boolean"!=typeof o&&(d=r,r=o,o=!1);var c,h="function"==typeof i?i.options:i;if(t&&t.render&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0,n&&(h.functional=!0)),s&&(h._scopeId=s),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,d(t)),t&&t._registeredComponents&&t._registeredComponents.add(a)},h._ssrRegister=c):e&&(c=o?function(){e.call(this,l(this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),c)if(h.functional){var u=h.render;h.render=function(t,e){return c.call(e),u(t,e)}}else{var f=h.beforeCreate;h.beforeCreate=f?[].concat(f,c):[c]}return i};const e={props:{tag:String,show:Boolean,reverse:Boolean,interval:{type:[String,Number],default:0},duration:{type:[String,Number],default:0},animateOnMount:{type:Boolean,default:!0},easeType:{type:String,default:"linear"}},created(){const t=this.$PU.lib;this.PUD={asyncRefs:new t.asyncRefs},this.addSlotKeys()},mounted(){this.$slots.default.forEach(t=>{t.elm.classList.add("item",this.show?"item-to":"item-from"),t.elm.addEventListener("transitionend",this.handleAnimationEnd)})},beforeDestroy(){["animateDelay","updateAnimation"].forEach(t=>{this.PUD.asyncRefs.cancel(t)}),this.$slots.default.forEach(t=>{t.elm.removeEventListener("transitionend",this.handleAnimationEnd)})},beforeUpdate(){this.addSlotKeys()},updated(){void 0===this.PUD.curIndex&&(this.PUD.curIndex=this.show==this.reverse?this.$slots.default.length-1:0),this.$el.classList.remove("to-ended","from-ended"),this.$el.classList.add("active"),this.PUD.asyncRefs.add("updateAnimation","requestAnimationFrame",requestAnimationFrame(()=>{this.$el.offsetWidth,this.animate()}))},methods:{addSlotKeys(){this.$slots.default.forEach((t,e)=>{t.key=null!=t.key?t.key:e})},animate(){const t=this,e=this.$PU.lib,i=[...this.$slots.default],s=i.length;!function n(a){t.PUD.curIndex=a;const o=i[a];o.elm.classList.remove("item-"+(t.show?"from":"to"));o.elm.classList.add("item-"+(t.show?"to":"from"));const r=a+(t.show?1:-1)*(t.reverse?-1:1);let d=t.duration?1e3*parseFloat(t.duration)/i.length:1e3*parseFloat(t.interval);if("linear"!=t.easeType){const i=Math.min(Math.max(r,0),s-1),n=e.animate.tween(a,0,1,s-1,t.easeType),o=e.animate.tween(i,0,1,s-1,t.easeType);d=Math.abs(n-o)*(s*d)}r>=0&&r<s&&t.PUD.asyncRefs.add("animateDelay","setTimeout",setTimeout(()=>{n(r)},d))}(this.PUD.curIndex)},handleAnimationEnd(t){const e=this.$slots.default;this.PUD.curIndex===(this.show&&!this.reverse?e.length-1:0)&&t.target===e[this.show?e.length-1:0].elm&&(this.$el.classList.remove((this.show?"from":"to")+"-ended"),this.$el.classList.add((this.show?"to":"from")+"-ended"),this.show||this.$el.classList.remove("active"))}}};var i=function(){var t=this.$createElement;return(this._self._c||t)("transition-group",this._g({attrs:{tag:this.tag||"div",css:!1}},this.$listeners),[this._t("default")],2)};i._withStripped=!0;var s=t({render:i,staticRenderFns:[]},void 0,e,void 0,!1,void 0,void 0,void 0);const n=new function(){this.animate=new function(){this.tween=function(t,e,i,s,n){let a=e;if(s&&e!==i){let o=(n||"quadratic-inout").replace(/ease/i,"quadratic").replace(/in\-out/i,"inout").split("-");a=((this.ease[o[1]||"inout"]||(()=>{}))[o[0]]||this.ease.inout.quadratic)(t,e,i-e,s)}return a},this.ease={in:{quadratic:(t,e,i,s)=>i*(t/=s)*t+e,cubic:(t,e,i,s)=>i*(t/=s)*t*t+e,quartic:(t,e,i,s)=>i*(t/=s)*t*t*t+e,quintic:(t,e,i,s)=>i*(t/=s)*t*t*t*t+e,sinusoidal:(t,e,i,s)=>-i*Math.cos(t/s*(Math.PI/2))+i+e,exponential:(t,e,i,s)=>0==t?e:i*Math.pow(2,10*(t/s-1))+e,circular:(t,e,i,s)=>-i*(Math.sqrt(1-(t/=s)*t)-1)+e},out:{quadratic:(t,e,i,s)=>-i*(t/=s)*(t-2)+e,cubic:(t,e,i,s)=>i*((t=t/s-1)*t*t+1)+e,quartic:(t,e,i,s)=>-i*((t=t/s-1)*t*t*t-1)+e,quintic:(t,e,i,s)=>i*((t=t/s-1)*t*t*t*t+1)+e,sinusoidal:(t,e,i,s)=>i*Math.sin(t/s*(Math.PI/2))+e,exponential:(t,e,i,s)=>t==s?e+i:i*(1-Math.pow(2,-10*t/s))+e,circular:(t,e,i,s)=>i*Math.sqrt(1-(t=t/s-1)*t)+e},inout:{linear:(t,e,i,s)=>i*t/s+e,quadratic:(t,e,i,s)=>(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e,cubic:(t,e,i,s)=>(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e,quartic:(t,e,i,s)=>(t/=s/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e,quintic:(t,e,i,s)=>(t/=s/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e,sinusoidal:(t,e,i,s)=>-i/2*(Math.cos(Math.PI*t/s)-1)+e,exponential:(t,e,i,s)=>0==t?e:t==s?e+i:(t/=s/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e,circular:(t,e,i,s)=>(t/=s/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}}},this.asyncRefs=function(){const t=this,e={};this.add=function(i,s,n){t.cancel(i),e[i]={obj:n,type:s}},this.cancel=function(t){let i=e[t];i&&("setTimeout"===i.type?clearTimeout(i.obj):"requestAnimationFrame"===i.type&&cancelAnimationFrame(i.obj),delete e[t])}}};return{install(t){t.component("pu-stagger",s);const e=t.prototype.$PU||(t.prototype.$PU={lib:{}});for(var i in n)e.lib[i]||(e.lib[i]=n[i])}}});
